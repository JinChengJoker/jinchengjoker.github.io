import{_ as s,c as a,o as n,a as l}from"./app.d5b54cdf.js";const F=JSON.parse('{"title":"Ruby on rails \u4E4B\u521D\u4F53\u9A8C","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u6570\u636E\u5EFA\u6A21","slug":"\u6570\u636E\u5EFA\u6A21"},{"level":2,"title":"\u6570\u636E\u5E93\u64CD\u4F5C","slug":"\u6570\u636E\u5E93\u64CD\u4F5C"},{"level":2,"title":"\u521B\u5EFA Controller","slug":"\u521B\u5EFA-controller"},{"level":2,"title":"\u521B\u5EFA\u8DEF\u7531","slug":"\u521B\u5EFA\u8DEF\u7531"},{"level":2,"title":"\u521B\u5EFA\u4E00\u4E2A\u7528\u6237","slug":"\u521B\u5EFA\u4E00\u4E2A\u7528\u6237"},{"level":2,"title":"\u6570\u636E\u9A8C\u8BC1","slug":"\u6570\u636E\u9A8C\u8BC1"},{"level":2,"title":"\u83B7\u53D6\u4E00\u4E2A\u7528\u6237","slug":"\u83B7\u53D6\u4E00\u4E2A\u7528\u6237"}],"relativePath":"blog/ruby/ruby_on_rails_02_start/index.md"}'),e={name:"blog/ruby/ruby_on_rails_02_start/index.md"},o=l(`<h1 id="ruby-on-rails-\u4E4B\u521D\u4F53\u9A8C" tabindex="-1">Ruby on rails \u4E4B\u521D\u4F53\u9A8C <a class="header-anchor" href="#ruby-on-rails-\u4E4B\u521D\u4F53\u9A8C" aria-hidden="true">#</a></h1><h2 id="\u6570\u636E\u5EFA\u6A21" tabindex="-1">\u6570\u636E\u5EFA\u6A21 <a class="header-anchor" href="#\u6570\u636E\u5EFA\u6A21" aria-hidden="true">#</a></h2><p>rails \u63D0\u4F9B\u4E86\u6570\u636E\u5E93\u5EFA\u6A21\u5DE5\u5177\uFF1A</p><div class="language-bash"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">bin/rails g model user name:string email:string</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u4E2A\u547D\u4EE4\u4F1A\u81EA\u52A8\u521B\u5EFA\u4E24\u4E2A\u6587\u4EF6\uFF1A\u4E00\u4E2A\u662F\u5BF9\u5E94\u7684<code>model</code>\u6587\u4EF6\uFF0C\u4E00\u4E2A\u662F\u5BF9\u5E94\u7684\u6570\u636E\u5E93\u64CD\u4F5C\u6587\u4EF6\u3002</p><p>\u7136\u540E\u6211\u4EEC\u76F4\u63A5\u586B\u5145/\u4FEE\u6539<code>db/migrate</code>\u76EE\u5F55\u4E0B\u5BF9\u5E94\u6587\u4EF6\u4E2D\u7684<code>change</code>\u65B9\u6CD5\u5373\u53EF\u3002</p><h2 id="\u6570\u636E\u5E93\u64CD\u4F5C" tabindex="-1">\u6570\u636E\u5E93\u64CD\u4F5C <a class="header-anchor" href="#\u6570\u636E\u5E93\u64CD\u4F5C" aria-hidden="true">#</a></h2><p>\u6570\u636E\u5E93\u540C\u6B65\uFF1A</p><div class="language-bash"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">bin/rails db:migrate</span></span>
<span class="line"></span></code></pre></div><p>\u6570\u636E\u5E93\u56DE\u6EDA\uFF1A</p><div class="language-bash"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#676E95;"># \u9ED8\u8BA4\u56DE\u6EDA\u5230\u4E0A\u4E00\u6B65</span></span>
<span class="line"><span style="color:#A6ACCD;">bin/rails db:rollback</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u53EF\u4EE5\u63A5\u53D7\u56DE\u6EDA\u6B65\u6570</span></span>
<span class="line"><span style="color:#A6ACCD;">bin/rails db:rollback step=1</span></span>
<span class="line"></span></code></pre></div><h2 id="\u521B\u5EFA-controller" tabindex="-1">\u521B\u5EFA Controller <a class="header-anchor" href="#\u521B\u5EFA-controller" aria-hidden="true">#</a></h2><p>\u521B\u5EFA\u4E00\u4E2A<code>users</code>\u7684<code>controller</code>\uFF0C\u5E76\u6DFB\u52A0<code>create</code>\u548C<code>show</code>\u65B9\u6CD5\uFF1A</p><div class="language-bash"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#A6ACCD;">bin/rails g controller users create show</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u4E2A\u547D\u4EE4\u540C\u65F6\u4E5F\u4F1A\u5E2E\u6211\u4EEC\u521B\u5EFA\u5BF9\u5E94\u7684\u8DEF\u7531\uFF0C\u4F46\u662F\u7531\u4E8E\u4E0D\u591F\u7CBE\u786E\u548C\u5B8C\u6574\uFF0C\u6240\u4EE5\u4E00\u822C\u90FD\u9700\u8981\u5220\u6389\u81EA\u5DF1\u91CD\u65B0\u5199\u3002</p><h2 id="\u521B\u5EFA\u8DEF\u7531" tabindex="-1">\u521B\u5EFA\u8DEF\u7531 <a class="header-anchor" href="#\u521B\u5EFA\u8DEF\u7531" aria-hidden="true">#</a></h2><p>\u5728<code>config/routes.rb</code>\u6587\u4EF6\u4E2D\u53EF\u4EE5\u521B\u5EFA\u8DEF\u7531\uFF1A</p><div class="language-ruby"><button class="copy"></button><span class="lang">ruby</span><pre><code><span class="line"><span style="color:#676E95;"># \u521B\u5EFA\u4E00\u4E2A POST \u8BF7\u6C42\uFF0C\u5E76\u5BF9\u5E94\u5230 users controller \u7684 create \u65B9\u6CD5</span></span>
<span class="line"><span style="color:#A6ACCD;">post </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/users</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">to:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">users#create</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u521B\u5EFA\u4E00\u4E2A GET \u8BF7\u6C42\uFF0C\u5E76\u5BF9\u5E94\u5230 users controller \u7684 show \u65B9\u6CD5</span></span>
<span class="line"><span style="color:#A6ACCD;">get </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/users/:id</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">to:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">users#show</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre></div><h2 id="\u521B\u5EFA\u4E00\u4E2A\u7528\u6237" tabindex="-1">\u521B\u5EFA\u4E00\u4E2A\u7528\u6237 <a class="header-anchor" href="#\u521B\u5EFA\u4E00\u4E2A\u7528\u6237" aria-hidden="true">#</a></h2><p>\u4FEE\u6539 users controller \u7684 create \u65B9\u6CD5\uFF1A</p><div class="language-ruby"><button class="copy"></button><span class="lang">ruby</span><pre><code><span class="line"><span style="color:#89DDFF;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">create</span></span>
<span class="line"><span style="color:#A6ACCD;">  user </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">User</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">name:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">jincheng</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">email:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">jinchengjoker@foxmail.com</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> user</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">save</span></span>
<span class="line"><span style="color:#A6ACCD;">    render </span><span style="color:#89DDFF;">json:</span><span style="color:#A6ACCD;"> user</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">else</span></span>
<span class="line"><span style="color:#A6ACCD;">    render </span><span style="color:#89DDFF;">json:</span><span style="color:#A6ACCD;"> user</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">errors</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">end</span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span></code></pre></div><ul><li><code>User.new</code>\u53EF\u4EE5\u521B\u5EFA\u4E00\u4E2A\u7528\u6237\u5B9E\u4F8B\u3002</li><li><code>user.save</code>\u53EF\u4EE5\u4FDD\u5B58\u4E00\u4E2A\u7528\u6237\u5B9E\u4F8B\u3002</li><li><code>render json: user</code>\u5C06<code>user</code>\u6570\u636E<code>json</code>\u5E8F\u5217\u5316\u540E\u8FD4\u56DE\u3002</li><li><code>render json: user.errors</code>\u5C06\u4FDD\u5B58<code>user</code>\u7684\u9519\u8BEF<code>json</code>\u5E8F\u5217\u5316\u540E\u8FD4\u56DE\u3002</li></ul><h2 id="\u6570\u636E\u9A8C\u8BC1" tabindex="-1">\u6570\u636E\u9A8C\u8BC1 <a class="header-anchor" href="#\u6570\u636E\u9A8C\u8BC1" aria-hidden="true">#</a></h2><p>\u5728 user \u7684 model \u6587\u4EF6\u4E2D\uFF0C\u53EF\u4EE5\u505A\u6570\u636E\u9A8C\u8BC1\uFF1A</p><div class="language-ruby"><button class="copy"></button><span class="lang">ruby</span><pre><code><span class="line"><span style="color:#89DDFF;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">User</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ApplicationRecord</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;"># \u90AE\u7BB1\u4E3A\u5FC5\u586B\u9879</span></span>
<span class="line"><span style="color:#A6ACCD;">  validates </span><span style="color:#89DDFF;">:email,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">presence:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true</span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span></code></pre></div><h2 id="\u83B7\u53D6\u4E00\u4E2A\u7528\u6237" tabindex="-1">\u83B7\u53D6\u4E00\u4E2A\u7528\u6237 <a class="header-anchor" href="#\u83B7\u53D6\u4E00\u4E2A\u7528\u6237" aria-hidden="true">#</a></h2><p>\u4FEE\u6539 users controller \u7684 show \u65B9\u6CD5\uFF1A</p><div class="language-ruby"><button class="copy"></button><span class="lang">ruby</span><pre><code><span class="line"><span style="color:#89DDFF;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">show</span></span>
<span class="line"><span style="color:#A6ACCD;">  user </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">User</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">find_by_id params</span><span style="color:#89DDFF;">[:id]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> user</span></span>
<span class="line"><span style="color:#A6ACCD;">    render </span><span style="color:#89DDFF;">json:</span><span style="color:#A6ACCD;"> user</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">else</span></span>
<span class="line"><span style="color:#A6ACCD;">    head </span><span style="color:#F78C6C;">404</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">end</span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span></code></pre></div><ul><li><code>User.find_by_id</code>\u53EF\u4EE5\u6839\u636E<code>id</code>\u67E5\u627E\u7528\u6237\u3002</li><li><code>params[:id]</code>\u53EF\u4EE5\u83B7\u53D6<code>id</code>\u53C2\u6570\u3002</li><li><code>head 404</code>\u8FD4\u56DE 404 \u72B6\u6001\u7801\u3002</li></ul><p>\u6CE8\u610F\uFF1A<code>ruby</code>\u4F1A\u6839\u636E\u6570\u636E\u521B\u5EFA\u7684\u5B57\u6BB5\u81EA\u52A8\u65B0\u589E\u5BF9\u5E94\u7684<code>find</code>\u65B9\u6CD5\uFF0C\u4F8B\u5982<code>find_by_id</code>\u3001<code>find_by_name</code>\u3001<code>find_by_email</code>\u7B49\u3002</p>`,30),p=[o];function c(r,t,d,i,D,y){return n(),a("div",null,p)}const A=s(e,[["render",c]]);export{F as __pageData,A as default};
